# دليل صفحات المعلمين والموظفين

## نظرة عامة

تم إنشاء صفحتين جديدتين لإدارة المعلمين والموظفين في نظام إدارة المدارس، مع تصميم احترافي ومنظم يتبع نفس الهوية البصرية للتطبيق.

## المكونات المُضافة

### 1. النماذج (Models)
- **`teacher_model.dart`**: نموذج بيانات المعلم
- **`employee_model.dart`**: نموذج بيانات الموظف

### 2. الخدمات (Services)
- **`teacher_service.dart`**: خدمة إدارة المعلمين
- **`employee_service.dart`**: خدمة إدارة الموظفين

### 3. الصفحات (Pages)
- **`teachers_page.dart`**: الصفحة الرئيسية لإدارة المعلمين
- **`employees_page.dart`**: الصفحة الرئيسية لإدارة الموظفين
- **`add_teacher_dialog.dart`**: نافذة إضافة معلم جديد
- **`edit_teacher_dialog.dart`**: نافذة تعديل بيانات معلم
- **`add_employee_dialog.dart`**: نافذة إضافة موظف جديد
- **`edit_employee_dialog.dart`**: نافذة تعديل بيانات موظف

### 4. قاعدة البيانات
تم تحديث `database_helper.dart` لإضافة:
- جدول `teachers` للمعلمين
- جدول `employees` للموظفين
- الفهارس المطلوبة للبحث السريع

## ميزات صفحة المعلمين

### واجهة المستخدم
- **تصميم احترافي**: يتبع نفس الهوية البصرية للتطبيق
- **ألوان منسقة**: استخدام درجات الأزرق والأخضر والرمادي
- **تخطيط منظم**: قسم التحكم، جدول البيانات، قسم الملخص

### قسم التحكم والبحث
- **تصفية حسب المدرسة**: قائمة منسدلة لاختيار المدرسة
- **البحث بالاسم**: حقل بحث نصي للبحث في أسماء المعلمين
- **أزرار التحكم**:
  - بحث
  - مسح الفلتر
  - تحديث
  - إضافة معلم

### جدول البيانات
يعرض المعلومات التالية:
- **الرقم التسلسلي**
- **اسم المعلم**
- **المدرسة**
- **عدد الحصص**
- **الراتب الشهري**
- **رقم الهاتف**
- **الملاحظات**
- **أزرار الإجراءات** (تعديل - حذف)

### قسم الملخص
- **إجمالي المعلمين**
- **المعروض حالياً**
- **إجمالي الحصص**
- **إجمالي الرواتب**
- **وقت آخر تحديث**

### نافذة إضافة معلم
- **الاسم** (مطلوب)
- **المدرسة** (مطلوب - قائمة منسدلة)
- **عدد الحصص** (مطلوب - رقم صحيح)
- **الراتب الشهري** (مطلوب - رقم عشري)
- **رقم الهاتف** (اختياري)
- **ملاحظات** (اختياري)

## ميزات صفحة الموظفين

### الاختلافات عن صفحة المعلمين
- **تصفية إضافية حسب المهنة**
- **عمود المهنة** بدلاً من عدد الحصص
- **قائمة المهن الشائعة** في نافذة الإضافة/التعديل

### المهن الشائعة المتاحة
- محاسب
- كاتب
- عامل نظافة
- حارس أمن
- سائق
- مشرف
- مساعد إداري
- فني صيانة
- عامل مختبر
- أمين مكتبة
- مرشد طلابي
- ممرض

### نافذة إضافة موظف
- **الاسم** (مطلوب)
- **المدرسة** (مطلوب - قائمة منسدلة)
- **المهنة** (مطلوب - قائمة منسدلة أو إدخال حر)
- **الراتب الشهري** (مطلوب - رقم عشري)
- **رقم الهاتف** (اختياري)
- **ملاحظات** (اختياري)

## الوظائف المتاحة

### عمليات CRUD
- **إضافة**: إضافة معلم/موظف جديد
- **عرض**: عرض قائمة بجميع المعلمين/الموظفين
- **تعديل**: تعديل بيانات معلم/موظف موجود
- **حذف**: حذف معلم/موظف مع تأكيد

### البحث والتصفية
- **البحث النصي**: البحث في أسماء المعلمين/الموظفين
- **التصفية حسب المدرسة**: عرض معلمين/موظفين مدرسة معينة
- **التصفية حسب المهنة**: (للموظفين فقط) عرض موظفين حسب نوع الوظيفة

### الإحصائيات
- **العدد الإجمالي**: إجمالي عدد المعلمين/الموظفين
- **العدد المعروض**: عدد المعلمين/الموظفين المعروضين حالياً
- **إجمالي الرواتب**: مجموع رواتب جميع المعلمين/الموظفين
- **إحصائيات إضافية**: (إجمالي الحصص للمعلمين، أنواع المهن للموظفين)

## التحديثات على قاعدة البيانات

### جدول المعلمين (teachers)
```sql
CREATE TABLE teachers (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  school_id INTEGER NOT NULL,
  class_hours INTEGER NOT NULL DEFAULT 0,
  monthly_salary DECIMAL(10,2) NOT NULL,
  phone TEXT,
  notes TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (school_id) REFERENCES schools(id) ON DELETE CASCADE
)
```

### جدول الموظفين (employees)
```sql
CREATE TABLE employees (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  school_id INTEGER NOT NULL,
  job_type TEXT NOT NULL,
  monthly_salary DECIMAL(10,2) NOT NULL,
  phone TEXT,
  notes TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (school_id) REFERENCES schools(id) ON DELETE CASCADE
)
```

### الفهارس المُضافة
- `idx_teachers_school_id`: فهرس على معرف المدرسة للمعلمين
- `idx_teachers_name`: فهرس على اسم المعلم
- `idx_employees_school_id`: فهرس على معرف المدرسة للموظفين
- `idx_employees_name`: فهرس على اسم الموظف
- `idx_employees_job_type`: فهرس على نوع الوظيفة

## كيفية الاستخدام

### للوصول إلى الصفحات
1. افتح التطبيق
2. من القائمة الجانبية، اختر "المعلمين" أو "الموظفين"

### لإضافة معلم/موظف جديد
1. اضغط على زر "إضافة معلم" أو "إضافة موظف"
2. املأ البيانات المطلوبة
3. اضغط على "إضافة المعلم" أو "إضافة الموظف"

### للبحث والتصفية
1. استخدم حقل البحث للبحث بالاسم
2. استخدم القوائم المنسدلة للتصفية حسب المدرسة أو المهنة
3. اضغط على "بحث" أو "مسح الفلتر"

### لتعديل البيانات
1. اضغط على أيقونة التعديل (قلم) بجانب المعلم/الموظف
2. عدّل البيانات المطلوبة
3. اضغط على "تحديث المعلم" أو "تحديث الموظف"

### لحذف معلم/موظف
1. اضغط على أيقونة الحذف (سلة المهملات)
2. أكد الحذف في النافذة المنبثقة

## الميزات التقنية

### التحقق من صحة البيانات
- التحقق من الحقول المطلوبة
- التحقق من صحة الأرقام والمبالغ
- رسائل خطأ واضحة

### إدارة الحالة
- تحديث البيانات تلقائياً بعد الإضافة/التعديل/الحذف
- عرض رسائل نجاح/خطأ واضحة
- مؤشرات تحميل أثناء العمليات

### الأداء
- استخدام فهارس قاعدة البيانات للبحث السريع
- تحميل البيانات بشكل فعال
- عرض النتائج بشكل سريع

### إمكانية الوصول
- دعم كامل للغة العربية
- تخطيط من اليمين إلى اليسار (RTL)
- أيقونات واضحة ومفهومة

## التطوير المستقبلي

### ميزات مقترحة
- تصدير البيانات إلى ملفات Excel/PDF
- طباعة التقارير
- إضافة صور للمعلمين والموظفين
- تتبع الحضور والغياب
- ربط الرواتب بنظام الحسابات

### تحسينات تقنية
- إضافة كاش للبيانات
- تحسين الأداء للكميات الكبيرة
- إضافة اختبارات وحدة
- تحسين واجهة المستخدم على الشاشات الصغيرة
